<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../iron-icons/iron-icons.html">

<dom-module id="chaturbate-heart">

  <template>
    <style>
      :host {
        --cb-moderator-color: #d41169;
        --cb-fanclub-color: #00ff1e;
        --cb-tipped-tons-color: #ff00f4;
        --cb-tipped-alot-color: #f00;
        --cb-tipped-color: #00F680;
        --cb-has-tokens-color: #ff4d00;
      }

      .heart {
        opacity: 1;
        position: absolute;
        bottom: 0;
        display: none;
        animation-iteration-count: 10;
      }

      .heart iron-icon {
        position: absolute;
        right: 0;
        top: 0;
        opacity: .9;
      }

      .heart iron-icon.enormous {
        --iron-icon-height: 128px;
        --iron-icon-width: 128px;
      }
      .heart iron-icon.large {
        --iron-icon-height: 80px;
        --iron-icon-width: 80px;
      }
      .heart iron-icon.medium {
        --iron-icon-height: 48px;
        --iron-icon-width: 48px;
      }
      .heart iron-icon.small {
        --iron-icon-height: 32px;
        --iron-icon-width: 32px;
      }
      .heart iron-icon.tiny {
        --iron-icon-height: 16px;
        --iron-icon-width: 16px;
      }
      
      .user-moderator {
        color: var(--cb-moderator-color);
      }
      .user-fanclub {
        color: var(--cb-fanclub-color);
      }
      .user-tipped-tons {
        color: var(--cb-tipped-tons-color);
      }
      .user-tipped-alot {
        color: var(--cb-tipped-alot-color);
      }
      .user-tipped {
        color: var(--cb-tipped-color);
      }
      .user-has-tokens {
        color: var(--cb-has-tokens-color);
      }
      
      @keyframes flowOne {
        0% {
          opacity: 0;
          bottom: 0;
          right: 14%
        }
        40% {
          opacity: .8;
        }
        50% {
          opacity: 1;
          right: 0;
        }
        60% {
          opacity: .2;
        }
        80% {
          bottom: 80%
        }
        100% {
          opacity: 0;
          bottom: 100%;
          right: 18%
        }
      }
      
      @keyframes flowTwo {
        0% {
          opacity: 0;
          bottom: 0;
          right: 0;
        }
        40% {
          opacity: .8;
        }
        50% {
          opacity: 1;
          right: 11%
        }
        60% {
          opacity: .2;
        }
        80% {
          bottom: 60%
        }
        100% {
          opacity: 0;
          bottom: 80%;
          right: 0;
        }
      }
      
      @keyframes flowThree {
        0% {
          opacity: 0;
          bottom: 0;
          right: 0;
        }
        40% {
          opacity: .8;
        }
        50% {
          opacity: 1;
          right: 30%
        }
        60% {
          opacity: .2;
        }
        80% {
          bottom: 70%
        }
        100% {
          opacity: 0;
          bottom: 90%;
          right: 0;
        }
      }
	  @keyframes flowFour {
        0% {
          opacity: 0;
          bottom: 0;
          right: 8%;
        }
        40% {
          opacity: .8;
        }
        50% {
          opacity: 1;
          right: 25%
        }
        60% {
          opacity: .9;
        }
        80% {
          bottom: 30%
        }
        100% {
          opacity: 0;
          bottom: 45%;
          right: 36%;
        }
      }
	  @keyframes flowFive {
        0% {
          opacity: 0;
          bottom: 0;
          right: 19%;
        }
        40% {
          opacity: .8;
        }
        50% {
          opacity: 1;
          right: 38%
        }
        60% {
          opacity: .7;
        }
        80% {
          bottom: 32%
        }
        100% {
          opacity: 0;
          bottom: 40%;
          right: 61%;
        }
      }
	  @keyframes flowSix {
        0% {
          opacity: 0;
          bottom: 0;
          right: 22%;
        }
        40% {
          opacity: .8;
        }
        50% {
          opacity: 1;
          right: 45%
        }
        60% {
          opacity: .7;
        }
        80% {
          bottom: 22%
        }
        100% {
          opacity: 0;
          bottom: 37%;
          right: 29%;
        }
      }
	  @keyframes flowSeven {
        0% {
          opacity: 0;
          bottom: 0;
          right: 21%;
        }
        40% {
          opacity: .8;
        }
        50% {
          opacity: 1;
          right: 30%
        }
        60% {
          opacity: .6;
        }
        80% {
          bottom: 70%
        }
        100% {
          opacity: 0;
          bottom: 90%;
          right: 15%;
        }
      }
	  @keyframes flowEight {
        0% {
          opacity: 0;
          bottom: 31%;
          right: 0;
        }
        40% {
          opacity: .8;
        }
        50% {
          opacity: 1;
          right: 30%
        }
        60% {
          opacity: .2;
        }
        80% {
          bottom: 70%
        }
        100% {
          opacity: 0;
          bottom: 90%;
          right: 0;
        }
      }
	  @keyframes flowNine {
        0% {
          opacity: 0;
          bottom: 21%;
          right: 39%;
        }
        40% {
          opacity: .8;
        }
        50% {
          opacity: 1;
          right: 56%
        }
        60% {
          opacity: .9;
        }
        80% {
          bottom: 91%
        }
        100% {
          opacity: 0;
          bottom: 68%;
          right: 25;
        }
      }
	  @keyframes flowTen {
        0% {
          opacity: 0;
          bottom: 25%;
          right: 34%;
        }
        40% {
          opacity: .9;
        }
        50% {
          opacity: 1;
          right: 44%
        }
        60% {
          opacity: .9;
        }
        80% {
          bottom: 55%
        }
        100% {
          opacity: 0;
          bottom: 79%;
          right: 32%;
        }
      }
    </style>

    <div id="heart"
          class$="heart [[colorClass]]"
          style$="animation: [[animation]] [[animationTime]]s linear;
                  display: block;">
      <iron-icon icon="icons:favorite" class$="[[sizeClass]]"></iron-icon>
    </div>
  </template>

  <script>
    class ChaturbateHeart extends Polymer.Element {
      static get is() {
        return 'chaturbate-heart';
      }

      static get properties() {
        return {
          done: {
            type: Boolean,
            notify: true,
            value: false,
            reflectToAttribute: true,
            readOnly: true,
          },
          colorClass: {
            type: String,
            value: 'user-has-tokens'
          },
          animation: {
            type: String,
            value: 'flowOne'
          },
          animationTime: {
            type: Number,
            value: 1.9
          },
          sizeClass: {
            type: String,
            value: 'small'
          }
        }
      }

      _onDone() {
        this._setDone(true);
        this.dispatchEvent(new CustomEvent('done'));
      }

      connectedCallback() {
        super.connectedCallback();

        this.$.heart.addEventListener('webkitAnimationEnd', () => {
          this._onDone(true);
        });

        this.$.heart.addEventListener('animationend', () => {
          this._onDone(true)
        });
      }

    }

    window.customElements.define(ChaturbateHeart.is, ChaturbateHeart);
  </script>
</dom-module>